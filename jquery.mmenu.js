(function(e){var d="mmenu",n="4.1.3";if(e[d]){return}var m={$wndw:null,$html:null,$body:null,$page:null,$blck:null,$allMenus:null,$scrollTopNode:null};var k={},g={},i={},o=0;e[d]=function(q,r,p){m.$allMenus=m.$allMenus.add(q);this.$menu=q;this.opts=r;this.conf=p;this.serialnr=o++;this._init();return this};e[d].prototype={open:function(){this._openSetup();this._openFinish();return"open"},_openSetup:function(){var q=l();this.$menu.addClass(k.current);m.$allMenus.not(this.$menu).trigger(g.close);m.$page.data(i.style,m.$page.attr("style")||"").data(i.scrollTop,q).data(i.offetLeft,m.$page.offset().left);var p=0;m.$wndw.off(g.resize).on(g.resize,function(t,s){if(s||m.$html.hasClass(k.opened)){var r=m.$wndw.width();if(r!=p){p=r;m.$page.width(r-m.$page.data(i.offetLeft))}}}).trigger(g.resize,[true]);if(this.conf.preventTabbing){m.$wndw.off(g.keydown).on(g.keydown,function(r){if(r.keyCode==9){r.preventDefault();return false}})}if(this.opts.modal){m.$html.addClass(k.modal)}if(this.opts.moveBackground){m.$html.addClass(k.background)}if(this.opts.position!="left"){m.$html.addClass(k.mm(this.opts.position))}if(this.opts.zposition!="back"){m.$html.addClass(k.mm(this.opts.zposition))}if(this.opts.classes){m.$html.addClass(this.opts.classes)}m.$html.addClass(k.opened);this.$menu.addClass(k.opened);m.$page.scrollTop(q);this.$menu.scrollTop(0)},_openFinish:function(){var p=this;a(m.$page,function(){p.$menu.trigger(g.opened)},this.conf.transitionDuration);m.$html.addClass(k.opening);this.$menu.trigger(g.opening);window.scrollTo(0,1)},close:function(){var p=this;a(m.$page,function(){p.$menu.removeClass(k.current).removeClass(k.opened);m.$html.removeClass(k.opened).removeClass(k.modal).removeClass(k.background).removeClass(k.mm(p.opts.position)).removeClass(k.mm(p.opts.zposition));if(p.opts.classes){m.$html.removeClass(p.opts.classes)}m.$wndw.off(g.resize).off(g.keydown);m.$page.attr("style",m.$page.data(i.style));if(m.$scrollTopNode){m.$scrollTopNode.scrollTop(m.$page.data(i.scrollTop))}p.$menu.trigger(g.closed)},this.conf.transitionDuration);m.$html.removeClass(k.opening);this.$menu.trigger(g.closing);return"close"},_init:function(){this.opts=b(this.opts,this.conf,this.$menu);this.direction=(this.opts.slidingSubmenus)?"horizontal":"vertical";this._initPage(m.$page);this._initMenu();this._initBlocker();this._initPanles();this._initLinks();this._initOpenClose();this._bindCustomEvents();if(e[d].addons){for(var p=0;p<e[d].addons.length;p++){if(typeof this["_addon_"+e[d].addons[p]]=="function"){this["_addon_"+e[d].addons[p]]()}}}},_bindCustomEvents:function(){var q=this;this.$menu.off(g.open+" "+g.close+" "+g.setPage+" "+g.update).on(g.open+" "+g.close+" "+g.setPage+" "+g.update,function(r){r.stopPropagation()});this.$menu.on(g.open,function(r){if(e(this).hasClass(k.current)){r.stopImmediatePropagation();return false}return q.open()}).on(g.close,function(r){if(!e(this).hasClass(k.current)){r.stopImmediatePropagation();return false}return q.close()}).on(g.setPage,function(s,r){q._initPage(r);q._initOpenClose()});var p=this.$menu.find(this.opts.isMenu&&this.direction!="horizontal"?"ul, ol":"."+k.panel);p.off(g.toggle+" "+g.open+" "+g.close).on(g.toggle+" "+g.open+" "+g.close,function(r){r.stopPropagation()});if(this.direction=="horizontal"){p.on(g.open,function(r){return f(e(this),q.$menu)})}else{p.on(g.toggle,function(r){var s=e(this);return s.triggerHandler(s.parent().hasClass(k.opened)?g.close:g.open)}).on(g.open,function(r){e(this).parent().addClass(k.opened);return"open"}).on(g.close,function(r){e(this).parent().removeClass(k.opened);return"close"})}},_initBlocker:function(){var p=this;if(!m.$blck){m.$blck=e('<div id="'+k.blocker+'" />').css("opacity",0).appendTo(m.$body)}m.$blck.off(g.touchstart).on(g.touchstart,function(q){q.preventDefault();q.stopPropagation();m.$blck.trigger(g.mousedown)}).on(g.mousedown,function(q){q.preventDefault();if(!m.$html.hasClass(k.modal)){p.$menu.trigger(g.close)}})},_initPage:function(p){if(!p){p=e(this.conf.pageSelector,m.$body);if(p.length>1){e[d].debug("Multiple nodes found for the page-node, all nodes are wrapped in one <"+this.conf.pageNodetype+">.");p=p.wrapAll("<"+this.conf.pageNodetype+" />").parent()}}p.addClass(k.page);m.$page=p},_initMenu:function(){var p=this;if(this.conf.clone){this.$menu=this.$menu.clone(true);this.$menu.add(this.$menu.find("*")).filter("[id]").each(function(){e(this).attr("id",k.mm(e(this).attr("id")))})}this.$menu.contents().each(function(){if(e(this)[0].nodeType==3){e(this).remove()}});this.$menu.prependTo("body").addClass(k.menu);this.$menu.addClass(k.mm(this.direction));if(this.opts.classes){this.$menu.addClass(this.opts.classes)}if(this.opts.isMenu){this.$menu.addClass(k.ismenu)}if(this.opts.position!="left"){this.$menu.addClass(k.mm(this.opts.position))}if(this.opts.zposition!="back"){this.$menu.addClass(k.mm(this.opts.zposition))}},_initPanles:function(){var u=this;this.__refactorClass(e("."+this.conf.listClass,this.$menu),"list");if(this.opts.isMenu){e("ul, ol",this.$menu).not(".mm-nolist").addClass(k.list)}var s=e("."+k.list+" > li",this.$menu);this.__refactorClass(s.filter("."+this.conf.selectedClass),"selected");this.__refactorClass(s.filter("."+this.conf.labelClass),"label");this.__refactorClass(s.filter("."+this.conf.spacerClass),"spacer");s.off(g.setSelected).on(g.setSelected,function(w,v){w.stopPropagation();s.removeClass(k.selected);if(typeof v!="boolean"){v=true}if(v){e(this).addClass(k.selected)}});this.__refactorClass(e("."+this.conf.panelClass,this.$menu),"panel");this.$menu.children().filter(this.conf.panelNodetype).add(this.$menu.find("."+k.list).children().children().filter(this.conf.panelNodetype)).addClass(k.panel);var t=e("."+k.panel,this.$menu);t.each(function(v){var x=e(this),w=x.attr("id")||k.mm("m"+u.serialnr+"-p"+v);x.attr("id",w)});t.find("."+k.panel).each(function(w){var B=e(this),A=B.is("ul, ol")?B:B.find("ul ,ol").first(),z=B.parent(),y=z.find("> a, > span"),v=z.closest("."+k.panel);B.data(i.parent,z);if(z.parent().is("."+k.list)){var x=e('<a class="'+k.subopen+'" href="#'+B.attr("id")+'" />').insertBefore(y);if(!y.is("a")){x.addClass(k.fullsubopen)}if(u.direction=="horizontal"){A.prepend('<li class="'+k.subtitle+'"><a class="'+k.subclose+'" href="#'+v.attr("id")+'">'+y.text()+"</a></li>")}}});var p=this.direction=="horizontal"?g.open:g.toggle;t.each(function(v){var w=e(this),x=w.attr("id");e('a[href="#'+x+'"]',u.$menu).off(g.click).on(g.click,function(y){y.preventDefault();w.trigger(p)})});if(this.direction=="horizontal"){var q=e("."+k.list+" > li."+k.selected,this.$menu);q.add(q.parents("li")).parents("li").removeClass(k.selected).end().each(function(){var w=e(this),v=w.find("> ."+k.panel);if(v.length){w.parents("."+k.panel).addClass(k.subopened);v.addClass(k.opened)}}).closest("."+k.panel).addClass(k.opened).parents("."+k.panel).addClass(k.subopened)}else{e("li."+k.selected,this.$menu).addClass(k.opened).parents("."+k.selected).removeClass(k.selected)}var r=t.filter("."+k.opened);if(!r.length){r=t.first()}r.addClass(k.opened).last().addClass(k.current);if(this.direction=="horizontal"){t.find("."+k.panel).appendTo(this.$menu)}},_initLinks:function(){var p=this;e("."+k.list+" > li > a",this.$menu).not("."+k.subopen).not("."+k.subclose).not('[rel="external"]').not('[target="_blank"]').off(g.click).on(g.click,function(s){var t=e(this),q=t.attr("href");if(p.__valueOrFn(p.opts.onClick.setSelected,t)){t.parent().trigger(g.setSelected)}var r=p.__valueOrFn(p.opts.onClick.preventDefault,t,q.slice(0,1)=="#");if(r){s.preventDefault()}if(p.__valueOrFn(p.opts.onClick.blockUI,t,!r)){m.$html.addClass(k.blocking)}if(p.__valueOrFn(p.opts.onClick.close,t,r)){p.$menu.triggerHandler(g.close)}})},_initOpenClose:function(){var p=this;var q=this.$menu.attr("id");if(q&&q.length){if(this.conf.clone){q=k.umm(q)}e('a[href="#'+q+'"]').off(g.click).on(g.click,function(r){r.preventDefault();p.$menu.trigger(g.open)})}var q=m.$page.attr("id");if(q&&q.length){e('a[href="#'+q+'"]').off(g.click).on(g.click,function(r){r.preventDefault();p.$menu.trigger(g.close)})}},__valueOrFn:function(r,p,q){if(typeof r=="function"){return r.call(p[0])}if(typeof r=="undefined"&&typeof q!="undefined"){return q}return r},__refactorClass:function(p,q){p.removeClass(this.conf[q+"Class"]).addClass(k[q])}};e.fn[d]=function(q,p){if(!m.$wndw){h()}q=b(q,p);p=j(p);return this.each(function(){var r=e(this);if(r.data(d)){return}r.data(d,new e[d](r,q,p))})};e[d].version=n;e[d].defaults={position:"left",zposition:"back",moveBackground:true,slidingSubmenus:true,modal:false,classes:"",onClick:{setSelected:true}};e[d].configuration={preventTabbing:true,panelClass:"Panel",listClass:"List",selectedClass:"Selected",labelClass:"Label",spacerClass:"Spacer",pageNodetype:"div",panelNodetype:"ul, ol, div",transitionDuration:400};(function(){var t=window.document,q=window.navigator.userAgent;var s="ontouchstart" in t,u="WebkitOverflowScrolling" in t.documentElement.style,r=(function(){var v=document.createElement("div").style;if("webkitTransition" in v){return"webkitTransition"}return"transition" in v})(),p=(function(){if(q.indexOf("Android")>=0){return 2.4>parseFloat(q.slice(q.indexOf("Android")+8))}return false})();e[d].support={touch:s,transition:r,oldAndroidBrowser:p,overflowscrolling:(function(){if(!s){return true}if(u){return true}if(p){return false}return true})()}})();e[d].useOverflowScrollingFallback=function(p){if(m.$html){if(typeof p=="boolean"){m.$html[p?"addClass":"removeClass"](k.nooverflowscrolling)}return m.$html.hasClass(k.nooverflowscrolling)}else{c=p;return p}};e[d].debug=function(p){};e[d].deprecated=function(q,p){if(typeof console!="undefined"&&typeof console.warn!="undefined"){console.warn("MMENU: "+q+" is deprecated, use "+p+" instead.")}};var c=!e[d].support.overflowscrolling;function b(r,s,q){if(typeof r!="object"){r={}}if(q){if(typeof r.isMenu!="boolean"){var p=q.children();r.isMenu=(p.length==1&&p.is(s.panelNodetype))}return r}if(typeof r.onClick!="object"){r.onClick={}}if(typeof r.onClick.setLocationHref!="undefined"){e[d].deprecated("onClick.setLocationHref option","!onClick.preventDefault");if(typeof r.onClick.setLocationHref=="boolean"){r.onClick.preventDefault=!r.onClick.setLocationHref}}r=e.extend(true,{},e[d].defaults,r);if(e[d].useOverflowScrollingFallback()){switch(r.position){case"top":case"right":case"bottom":e[d].debug('position: "'+r.position+'" not supported when using the overflowScrolling-fallback.');r.position="left";break}switch(r.zposition){case"front":case"next":e[d].debug('z-position: "'+r.zposition+'" not supported when using the overflowScrolling-fallback.');r.zposition="back";break}}return r}function j(p){if(typeof p!="object"){p={}}if(typeof p.panelNodeType!="undefined"){e[d].deprecated("panelNodeType configuration option","panelNodetype");p.panelNodetype=p.panelNodeType}p=e.extend(true,{},e[d].configuration,p);if(typeof p.pageSelector!="string"){p.pageSelector="> "+p.pageNodetype}return p}function h(){m.$wndw=e(window);m.$html=e("html");m.$body=e("body");m.$allMenus=e();e.each([k,i,g],function(p,q){q.add=function(s){s=s.split(" ");for(var r in s){q[s[r]]=q.mm(s[r])}}});k.mm=function(p){return"mm-"+p};k.add("menu ismenu panel list subtitle selected label spacer current highest hidden page blocker modal background opened opening subopened subopen fullsubopen subclose nooverflowscrolling");k.umm=function(p){if(p.slice(0,3)=="mm-"){p=p.slice(3)}return p};i.mm=function(p){return"mm-"+p};i.add("parent style scrollTop offetLeft");g.mm=function(p){return p+".mm"};g.add("toggle open opening opened close closing closed update setPage setSelected transitionend touchstart touchend mousedown mouseup click keydown keyup resize");e[d]._c=k;e[d]._d=i;e[d]._e=g;e[d].glbl=m;e[d].useOverflowScrollingFallback(c)}function f(s,r){if(s.hasClass(k.current)){return false}var q=e("."+k.panel,r),p=q.filter("."+k.current);q.removeClass(k.highest).removeClass(k.current).not(s).not(p).addClass(k.hidden);if(s.hasClass(k.opened)){p.addClass(k.highest).removeClass(k.opened).removeClass(k.subopened)}else{s.addClass(k.highest);p.addClass(k.subopened)}s.removeClass(k.hidden).removeClass(k.subopened).addClass(k.current).addClass(k.opened);return"open"}function l(){if(!m.$scrollTopNode){if(m.$html.scrollTop()!=0){m.$scrollTopNode=m.$html}else{if(m.$body.scrollTop()!=0){m.$scrollTopNode=m.$body}}}return(m.$scrollTopNode)?m.$scrollTopNode.scrollTop():0}function a(p,r,t){var q=e[d].support.transition;if(q=="webkitTransition"){p.one("webkitTransitionEnd",r)}else{if(q){p.one(g.transitionend,r)}else{setTimeout(r,t)}}}})(jQuery);
